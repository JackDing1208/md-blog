# Cookie - Session - Token

主要作用是为了服务端在收到请求时验证用户身份的真实性来对应处理请求并返回响应

## Cookie

cookie一般为服务端通过响应头Set-Cookie返回一串字符串，浏览器收到之后会根据域名自动存在本地，下次向相同域名发起请求时一般会在请求头中自动带上当前域名的cookie，服务端可以设置cookie的种类和过期时间，但是用户可以任意篡改cookie的内容

## Session

session为服务端存放的用户数据，一般是以cookie-userId形式存储的键值对，服务端可以根据浏览器发送的cookie来校验用户的身份及权限。由于cookie一般为随机数，可以保障基本的安全需求，但是一旦用户数据太多无法存在同一台服务器上则需要做负载均衡，并且还是存在相关业务服务器挂掉导致无法校验的风险

## Token

由于服务端使用session的限制便推出现了token，服务端不需要存储大量数据，只需要进行加密比对即可验证用户身份的真实性，大致流程如下：

1. token一般包含用户数据A和签名B两部分，证书B通过服务端的密钥对用户数据A加密算出，服务端在用户登录成功后通响应头将token返回给浏览器
2. 浏览器收到token后一般存在localStorage，之后每次请求通过自定义请求头带上token
3. 服务端取到请求中的token后，会用密钥对token中的用户数据A进行加密计算，如果加密出来的签名C与收到token中的签名B相等则说明token是真实有效的，然后再去处理具体请求

[参考博客](https://www.cnblogs.com/moyand/p/9047978.html)

